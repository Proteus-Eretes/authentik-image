version: 1
metadata:
  name: Proteus - Password change flow
entries:
  - model: authentik_flows.flow
    id: flow
    identifiers:
      slug: changepassword
    attrs:
      designation: stage_configuration
      name: Change Password
      title: Change password
  - model: authentik_stages_prompt.prompt
    id: prompt-field-password
    identifiers:
      field_key: password
      label: Password
    attrs:
      order: 300
      placeholder: Password
      placeholder_expression: false
      required: true
      type: password
  - model: authentik_stages_prompt.prompt
    id: prompt-field-password-repeat
    identifiers:
      field_key: password_repeat
      label: Password (repeat)
    attrs:
      order: 301
      placeholder: Password (repeat)
      placeholder_expression: false
      required: true
      type: password
  - model: authentik_stages_prompt.promptstage
    id: proteus-password-change-prompt
    identifiers:
      name: proteus-password-change-prompt
    attrs:
      fields:
        - !KeyOf prompt-field-password
        - !KeyOf prompt-field-password-repeat
  - model: authentik_stages_user_write.userwritestage
    id: proteus-password-change-write
    identifiers:
      name: proteus-password-change-write
  - model: authentik_flows.flowstagebinding
    identifiers:
      order: 0
      stage: !KeyOf proteus-password-change-prompt
      target: !KeyOf flow
  - model: authentik_flows.flowstagebinding
    identifiers:
      order: 1
      stage: !KeyOf proteus-password-change-write
      target: !KeyOf flow
